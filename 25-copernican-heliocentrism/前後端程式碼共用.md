# 前後端程式碼共用：Node.js 與 JavaScript 跨界合作的魔法

在網頁開發的世界裡，前端工程師和後端工程師往往扮演著不同的角色，各自在自己的領域裡努力工作。但是，有沒有可能讓前端和後端共享同一份程式碼，並且依然能夠保持工作的效率和質量呢？答案是肯定的，而這一切都得益於 Node.js 以及 JavaScript 的強大功能。本文將介紹如何達到前後端程式碼共用的目標，並且提供一些實際的程式碼範例供讀者參考。

## 前端與後端的分隔

在進行前後端程式碼共用之前，我們先來回顧一下傳統的前後端程式碼結構。在這種結構中，前端程式碼主要負責使用者界面（UI）的互動設計，包括按鈕的點擊、表單的提交等等。而後端程式碼則負責處理來自前端的請求，包括數據庫的查詢、伺服器的響應等等。前端和後端之間通過 HTTP 協議進行交互，彼此之間的工作完全獨立，各司其職。

## Node.js 的引入

然而，隨著網頁技術的發展，前後端的分隔已經不再那麼明顯。Node.js 的出現讓 JavaScript 能夠在伺服器端運行，這意味著前端工程師可以使用同一種語言來寫前端和後端的程式碼。這種情況下，我們就有可能實現前後端程式碼的共用。

為了達到程式碼共用的目標，我們需要將程式碼分為三個部分：前端專用、後端專用和共享部分。前端專用和後端專用的程式碼依然獨立開發，而共享部分的程式碼則可以在前端和後端之間共享。

為了讓大家更好地理解，我們來看一個簡單的範例。假設我們有一個函式 `getGreeting`，它接受一個名字作為參數，並返回一個問候語。這個函式可以在前端和後端都使用，所以我們將它放在共享部分。

```javascript
// 共享部分的程式碼
function getGreeting(name) {
  return `Hello, ${name}!`;
}
```

在前端，我們可以使用這個函式來顯示一個問候語。

```javascript
// 前端專用的程式碼
document.getElementById('greeting').innerText = getGreeting('Alice');
```

在後端，我們也可以使用這個函式來響應一個 HTTP 請求。

```javascript
// 後端專用的程式碼
app.get('/greeting', (req, res) => {
  res.send(getGreeting(req.query.name));
});
```

這樣，我們就實現了前後端程式碼的共用。無論是在前端還是在後端，我們都可以使用同一份 `getGreeting` 函式的程式碼。這不僅可以提高我們的開發效率，還可以保證程式碼的一致性。

## 結語

前後端程式碼共用是一種新的開發模式，它打破了傳統的前後端分隔，讓前端工程師和後端工程師可以更好地協作。雖然這種模式還有許多需要探索和優化的地方，但是我們相信，隨著技術的發展，前後端程式碼共用將會成為網頁開發的一種新趨勢。