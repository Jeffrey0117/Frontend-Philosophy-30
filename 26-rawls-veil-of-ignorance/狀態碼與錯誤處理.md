# 狀態碼與錯誤處理在 RESTful API 設計中的角色

在我們設計和開發 RESTful API 時，狀態碼和錯誤處理是不可或缺的部分。透過它們，我們可以讓 API 的使用者更好地理解每一個請求的結果，並做出適當的回應。這篇文章將會深入探討狀態碼和錯誤處理的概念，並提供一些實際的程式碼範例。

## HTTP 狀態碼

HTTP 狀態碼是一個三位數的數字，由 HTTP 協定定義，用來表示伺服器對於客戶端請求的回應狀態。這些狀態碼大致上可以分為五種類型：

- 1xx：信息，表示請求已被伺服器接收，需要進一步的處理。
- 2xx：成功，表示請求已成功被伺服器接收、理解、並接受。
- 3xx：重定向，需要進一步的操作以完成請求。
- 4xx：客戶端錯誤，請求含有語法錯誤或無法被伺服器執行。
- 5xx：伺服器錯誤，伺服器在處理請求的過程中發生錯誤。

當我們在設計 RESTful API 時，必須妥善使用這些狀態碼，以便客戶端能夠正確地理解請求的結果。

```javascript
app.get('/api/users/:id', (req, res) => {
  const user = users.find(u => u.id === req.params.id);
  
  if (!user) {
    res.status(404).send('User not found');
  } else {
    res.status(200).json(user);
  }
});
```

在上面的程式碼範例中，我們使用了 200 和 404 兩種狀態碼，分別表示請求成功和請求的資源未找到。

## 錯誤處理

在處理請求的過程中，我們經常會遇到各種錯誤，例如語法錯誤、運行時錯誤、邏輯錯誤等。這些錯誤可能會導致請求無法正常完成，因此我們必須對它們進行處理。

在 Node.js 中，我們可以使用 `try...catch` 語句來捕獲和處理錯誤。以下是一個範例：

```javascript
app.post('/api/users', (req, res) => {
  try {
    const user = createUser(req.body);
    res.status(201).json(user);
  } catch (error) {
    res.status(400).send(error.message);
  }
});
```

在這個範例中，我們嘗試創建一個新的使用者。如果在這個過程中發生錯誤，我們將捕獲這個錯誤，並返回一個帶有 400 狀態碼的回應。

## 結語

狀態碼和錯誤處理在 RESTful API 設計中扮演了重要的角色。透過妥善地使用它們，我們可以提供更好的 API 使用體驗，並降低開發和維護的複雜度。希望這篇文章能對你有所幫助，如果你有任何問題或建議，歡迎留言討論。