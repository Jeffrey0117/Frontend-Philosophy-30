# 常見的跨域解決方案

在現代的 Web 開發中，跨域是一個常見的問題。何謂跨域？簡單來說，當我們試圖從一個網域（domain）發送請求到另一個網域時，我們就會遇到跨域的問題。本文將會介紹幾種常見的跨域解決方案。

## 使用 JSONP

JSONP 是 JSON with Padding 的縮寫，是一種非官方的跨域解決方案。透過在網頁中動態添加一個`<script>`標籤，我們可以從不同的網域獲取 JSON 資料。

以下是一個使用 JSONP 的簡單範例：

```html
<script>
  function handleResponse(data) {
    console.log(data);
  }
</script>

<script src="http://example.com/data?callback=handleResponse"></script>
```

## 使用 CORS

CORS 是 Cross-Origin Resource Sharing 的縮寫，是一種官方的跨域解決方案。透過在伺服器端設定適當的 HTTP 標頭，我們可以允許來自不同網域的請求。

以下是一個簡單的 CORS 設定範例：

```javascript
app.use(function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
  next();
});
```

## 使用 Proxy 伺服器

除了 JSONP 和 CORS 之外，我們還可以使用 Proxy 伺服器來解決跨域的問題。透過在同一個網域下設置一個 Proxy 伺服器，我們可以將跨域的請求轉發到目標伺服器。

以下是一個使用 Express 和 http-proxy-middleware 來設置 Proxy 伺服器的範例：

```javascript
const express = require('express');
const { createProxyMiddleware } = require('http-proxy-middleware');

const app = express();

app.use('/api', createProxyMiddleware({
  target: 'http://example.com',
  changeOrigin: true
}));

app.listen(3000);
```

總結，跨域是一個常見但也十分重要的問題。雖然有多種方法可以解決跨域的問題，但每種方法都有其適用的場景，並無一種方法可以適用於所有情況。因此，我們需要根據實際的需求和環境，選擇最適合的解決方案。