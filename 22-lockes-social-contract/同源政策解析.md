# 同源政策解析

在我們的網頁開發生涯中，我們常常會遇到一種名為"同源政策"（Same-origin policy）的限制。它是一種重要的網路安全概念，瞭解它對於前端工程師來說實為重要。那麼，什麼是同源政策呢？ 

## 什麼是同源政策？

同源政策是一種在網路腳本（如 JavaScript）中實施的重要安全機制。它的主要目標是保護用戶的敏感資訊，防止惡意網站進行攻擊。

在同源政策的規定下，一個網頁的腳本只能訪問與該網頁同源的資源。"同源"的定義是 "協議、主機與埠號" 這三者都相同。例如，"https://www.example.com:80" 與 "https://www.example.com:443" 就不屬於同源，因為它們的埠號不同。

## 為什麼需要同源政策？

想象一下，如果沒有同源政策，一個惡意網站的腳本可能就能訪問到你在銀行網站上的資訊，例如你的帳戶餘額、交易記錄等。這對你的網路安全來說無疑是極大的威脅。 

因此，同源政策的存在就是為了確保你的敏感資訊只能被你信任的網站訪問，防止被不明來路的腳本盜取。

## 如何處理跨域請求？

雖然同源政策對於我們的網路安全有很大的幫助，但它也帶來了一些不便，那就是我們無法直接從一個網域向另一個網域發送請求。這就涉及到了所謂的"跨域請求"（Cross-Origin Request）。

那麼，我們該如何處理跨域請求呢？其中一種常見的解決方法就是使用"跨來源資源共享"（CORS，Cross-Origin Resource Sharing）。

CORS 是一種瀏覽器技術，它允許網頁腳本跨域訪問資源。在 CORS 中，瀏覽器會向服務器發送一個預檢請求（preflight request），詢問服務器是否願意接受跨域請求。如果服務器同意，則瀏覽器才會發送實際的請求。

以下是一個使用 JavaScript 的 `fetch` 函數發送跨域請求的例子：

```javascript
fetch('https://www.example.com/data', {
  method: 'GET',
  mode: 'cors', // 使用 CORS
  headers: {
    'Content-Type': 'application/json'
  }
}).then(response => {
  if (response.ok) {
    return response.json();
  } else {
    throw new Error('Network response was not ok.');
  }
}).then(data => console.log(data))
.catch(error => console.log('There has been a problem with your fetch operation: ', error.message));
```

## 結語

同源政策是我們在開發網頁時必須面對的一種安全機制，雖然它有時會帶來一些不便，但其對於我們的網路安全的重要性不容忽視。幸好，我們有像 CORS 這樣的技術可以幫助我們處理跨域請求，讓我們能夠在保證安全的前提下，順利地訪問到我們需要的資源。